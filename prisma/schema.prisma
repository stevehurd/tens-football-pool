generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Participant {
  id        String      @id @default(cuid())
  name      String      @unique
  createdAt DateTime    @default(now())
  updatedAt DateTime    @updatedAt
  selections Selection[]
}

model Team {
  id          String      @id @default(cuid())
  name        String      @unique
  abbreviation String?
  league      String      // "NFL" or "COLLEGE"
  conference  String?     // For college teams
  division    String?     // For NFL teams
  logoUrl     String?
  espnId      Int?        // ESPN API team ID
  wins        Int         @default(0)
  losses      Int         @default(0)
  ties        Int         @default(0)
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  selections  Selection[]
  
  @@unique([espnId, league])
}

model Selection {
  id            String      @id @default(cuid())
  participantId String
  teamId        String
  selectionType String      // "NFL" or "COLLEGE"
  pickNumber    Int         // 1-10 (draft order)
  createdAt     DateTime    @default(now())
  
  participant   Participant @relation(fields: [participantId], references: [id])
  team          Team        @relation(fields: [teamId], references: [id])
  
  @@unique([participantId, pickNumber])
  @@unique([participantId, teamId])
}

model Season {
  id        String   @id @default(cuid())
  year      Int      @unique
  isActive  Boolean  @default(false)
  startDate DateTime
  endDate   DateTime
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
